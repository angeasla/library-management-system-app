"use strict";(self.webpackChunklibrary_management_system=self.webpackChunklibrary_management_system||[]).push([[734],{8200:(M,m,l)=>{l.r(m),l.d(m,{PublisherModule:()=>L});var c=l(3403),b=l(6814),h=l(3820),Z=l(9862),r=l(6223),d=l(7707),e=l(9468),p=l(7700);let g=(()=>{class s{constructor(t,i,n){this.publisherService=t,this.snackBar=i,this.dialogRef=n,this.publishers=[],this.publisherForm=new r.cw({name:new r.NI("",r.kI.required)})}onSubmit(){this.publisherForm.valid&&this.publisherService.createPublisher(this.publisherForm.value).subscribe(t=>{this.publishers.push(t),this.snackBar.open("Publisher created successfully!","",{duration:4e3}),this.dialogRef.close()})}onCancelClick(){this.dialogRef.close()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.p),e.Y36(d.ux),e.Y36(p.so))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-publisher-insert"]],decls:13,vars:1,consts:[[1,"container","p-4","mat-dialog-content"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["id","name","type","text","formControlName","name",1,"form-control"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-secondary","ms-3",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Create Publisher"),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Name:"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"div",2)(9,"button",5),e._uU(10,"Create Publisher"),e.qZA(),e.TgZ(11,"button",6),e.NdJ("click",function(){return i.onCancelClick()}),e._uU(12,"Cancel"),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("formGroup",i.publisherForm))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".mat-dialog-content[_ngcontent-%COMP%]{max-height:95vh;overflow-y:auto}"]}),s})(),_=(()=>{class s{constructor(t,i,n,u,a){this.publisherService=t,this.fb=i,this.snackBar=n,this.dialogRef=u,this.data=a,this.publisherId=null,this.publisher=null,this.publisherId=a.publisherId,this.publisherForm=this.fb.group({name:["",r.kI.required]})}ngOnInit(){this.publisherId&&this.publisherService.getPublisherById(this.publisherId).subscribe(t=>{this.publisherForm.patchValue({name:t.name})})}updatePublisher(){if(this.publisherForm.valid&&this.publisherId){const t={...this.publisherForm.value};this.publisherService.updatePublisher(this.publisherId,t).subscribe(()=>{this.snackBar.open("Publisher updated successfully!","",{duration:2e3}),this.dialogRef.close()})}}onCancelClick(){this.dialogRef.close()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.p),e.Y36(r.qu),e.Y36(d.ux),e.Y36(p.so),e.Y36(p.WI))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-publisher-update"]],decls:16,vars:2,consts:[[1,"container","p-4","mat-dialog-content"],[1,"nav","nav-underline"],[1,"nav-item"],[1,"nav-link","active"],[3,"formGroup","ngSubmit"],[1,"mb-3","form-group"],["for","name",1,"form-label","fw-bold"],["id","name","type","text","formControlName","name","name","name","required","",1,"form-control"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-secondary","ms-3",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"ul",1)(2,"li",2)(3,"a",3),e._uU(4),e.qZA()()(),e._UZ(5,"hr"),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return i.updatePublisher()}),e.TgZ(7,"div",5)(8,"label",6),e._uU(9,"Name:"),e.qZA(),e._UZ(10,"input",7),e.qZA(),e.TgZ(11,"div",5)(12,"button",8),e._uU(13,"Update Publisher"),e.qZA(),e.TgZ(14,"button",9),e.NdJ("click",function(){return i.onCancelClick()}),e._uU(15,"Cancel"),e.qZA()()()()),2&t&&(e.xp6(4),e.hij("Update Publisher: ",i.publisherForm.value.name,""),e.xp6(2),e.Q6J("formGroup",i.publisherForm))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u],styles:[".mat-dialog-content[_ngcontent-%COMP%]{max-height:95vh;overflow-y:auto}"]}),s})();var k=l(68);let C=(()=>{class s{constructor(t,i){this.publisherService=t,this.snackBar=i,this.onDeleted=new e.vpe}deletePublisher(){this.publisherService.deletePublisher(this.publisherId).subscribe(()=>{console.log("Delete button clicked"),this.snackBar.open("Publisher deleted successfully!","",{duration:4e3}),this.onDeleted.emit()})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.p),e.Y36(d.ux))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-publisher-delete"]],inputs:{publisherId:"publisherId"},outputs:{onDeleted:"onDeleted"},decls:2,vars:0,consts:[[1,"btn","btn-outline-danger","btn-sm",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return i.deletePublisher()}),e._uU(1,"Delete"),e.qZA())}}),s})(),v=(()=>{class s{constructor(t){this.publisherService=t,this.publisherFound=new e.vpe,this.name="",this.publisher=null}ngOnInit(){}search(){this.publisherService.getPublisherByName(this.name).subscribe(t=>this.publisherFound.emit(t),t=>console.error("Error fetching publisher by name:",t))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.p))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-publisher-search-by-name"]],outputs:{publisherFound:"publisherFound"},decls:4,vars:1,consts:[[1,"input-group"],["type","text","placeholder","Search by name","aria-describedby","button-addon1",3,"ngModel","ngModelChange","keyup.enter"],["type","button","id","button-addon1",1,"btn","btn-outline-primary",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("ngModelChange",function(u){return i.name=u})("keyup.enter",function(){return i.search()}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return i.search()}),e._uU(3,"Search"),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngModel",i.name))},dependencies:[r.Fj,r.JJ,r.On]}),s})();const f=function(s){return["/publisher/books-by-publisher",s]};function y(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"table",14)(2,"thead",15)(3,"tr")(4,"th"),e._uU(5,"Name"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Action"),e.qZA()()(),e.TgZ(8,"tbody")(9,"tr")(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td")(13,"button",16),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.openUpdateDialog(n.searchedPublisher.publisherId))}),e._uU(14,"Update"),e.qZA(),e.TgZ(15,"app-publisher-delete",17),e.NdJ("onDeleted",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.getAllPublishers())}),e.qZA(),e.TgZ(16,"button",18),e._uU(17),e.qZA()()()()(),e.TgZ(18,"button",19),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.backToPublishersList())}),e.O4$(),e.TgZ(19,"svg",20),e._UZ(20,"path",21),e.qZA(),e._uU(21," Back to Users List"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(11),e.Oqu(t.searchedPublisher.name),e.xp6(4),e.Q6J("publisherId",t.searchedPublisher.publisherId),e.xp6(1),e.Q6J("routerLink",e.VKq(4,f,t.searchedPublisher.publisherId)),e.xp6(1),e.hij("View Books by ",t.searchedPublisher.name,"")}}function T(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"button",16),e.NdJ("click",function(){const u=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.openUpdateDialog(u.publisherId))}),e._uU(5,"Update"),e.qZA(),e.TgZ(6,"app-publisher-delete",17),e.NdJ("onDeleted",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.getAllPublishers())}),e.qZA(),e.TgZ(7,"button",18),e._uU(8),e.qZA()()()}if(2&s){const t=o.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(4),e.Q6J("publisherId",t.publisherId),e.xp6(1),e.Q6J("routerLink",e.VKq(4,f,t.publisherId)),e.xp6(1),e.hij("View Books by ",t.name,"")}}function A(s,o){if(1&s&&(e.TgZ(0,"div")(1,"table",22)(2,"thead",15)(3,"tr")(4,"th"),e._uU(5,"Name"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Action"),e.qZA()()(),e.TgZ(8,"tbody"),e.YNc(9,T,9,6,"tr",23),e.qZA()()()),2&s){const t=e.oxw();e.xp6(9),e.Q6J("ngForOf",t.publishers)}}function x(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"li",11)(1,"a",12),e.NdJ("click",function(){const u=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.onPageChange(u))}),e._uU(2),e.qZA()()}if(2&s){const t=o.$implicit,i=e.oxw();e.ekj("active",t===i.currentPage),e.xp6(2),e.Oqu(t+1)}}let U=(()=>{class s{constructor(t,i){this.publisherService=t,this.dialog=i,this.publishers=[],this.totalPublishers=0,this.pageSize=10,this.currentPage=0,this.pageNumbers=[],this.searchedPublisher=null}ngOnInit(){console.log("PublishersListComponent Initiated"),this.getAllPublishersWithPagination(this.currentPage)}getAllPublishers(){this.publisherService.getAllPublishers().subscribe(t=>{this.publishers=t})}getAllPublishersWithPagination(t){this.publisherService.getAllPublishersWithPagination(t,this.pageSize).subscribe({next:i=>{this.publishers=i.content,this.totalPublishers=i.totalElements,this.pageNumbers=Array.from({length:i.totalPages},(n,u)=>u)},error:i=>{console.error("Error fetching publishers:",i)}})}openUpdateDialog(t){this.dialog.open(_,{minWidth:"50%",autoFocus:!1,data:{publisherId:t}}).afterClosed().subscribe(n=>{this.getAllPublishersWithPagination(0)})}openCreateDialog(){this.dialog.open(g,{minWidth:"50%",autoFocus:!1,data:{publisherId:null}}).afterClosed().subscribe(i=>{this.getAllPublishersWithPagination(0)})}onPageChange(t){t>=0&&t<this.pageNumbers.length&&(this.currentPage=t,this.getAllPublishersWithPagination(t))}displaySearchedPublisher(t){this.searchedPublisher=t}backToPublishersList(){this.searchedPublisher=null}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.p),e.Y36(p.uw))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-publishers-list"]],decls:24,vars:7,consts:[[1,"container"],[1,"nav","nav-tabs"],[1,"nav-item","display-6"],[1,"nav-link","active"],[1,"d-flex","mb-3"],[1,"btn","btn-success","mb-3",3,"click"],[1,"ms-auto"],[3,"publisherFound"],[4,"ngIf"],["aria-label","Publisher pagination",1,"mt-3"],[1,"pagination","justify-content-center"],[1,"page-item"],["href","javascript:void(0)",1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"table","table-striped","table-hover","my-4"],[1,"table-dark"],[1,"btn","btn-outline-warning","btn-sm","mx-1",3,"click"],[1,"mx-1",3,"publisherId","onDeleted"],[1,"btn","btn-outline-primary","btn-sm","mx-1",3,"routerLink"],[1,"btn","btn-secondary","mb-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-left"],["fill-rule","evenodd","d","M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"ul",1)(2,"li",2)(3,"a",3),e._uU(4,"Publishers"),e.qZA()()(),e._UZ(5,"br")(6,"app-statistics")(7,"hr"),e.TgZ(8,"div",4)(9,"button",5),e.NdJ("click",function(){return i.openCreateDialog()}),e._uU(10,"Add new Publisher"),e.qZA(),e.TgZ(11,"div",6)(12,"app-publisher-search-by-name",7),e.NdJ("publisherFound",function(u){return i.displaySearchedPublisher(u)}),e.qZA()()(),e.YNc(13,y,22,6,"div",8),e.YNc(14,A,10,1,"div",8),e.TgZ(15,"nav",9)(16,"ul",10)(17,"li",11)(18,"a",12),e.NdJ("click",function(){return i.onPageChange(i.currentPage-1)}),e._uU(19,"Previous"),e.qZA()(),e.YNc(20,x,3,3,"li",13),e.TgZ(21,"li",11)(22,"a",12),e.NdJ("click",function(){return i.onPageChange(i.currentPage+1)}),e._uU(23,"Next"),e.qZA()()()()()),2&t&&(e.xp6(13),e.Q6J("ngIf",i.searchedPublisher),e.xp6(1),e.Q6J("ngIf",!i.searchedPublisher),e.xp6(3),e.ekj("disabled",0===i.currentPage),e.xp6(3),e.Q6J("ngForOf",i.pageNumbers),e.xp6(1),e.ekj("disabled",i.currentPage===i.totalPublishers/i.pageSize-1))},dependencies:[b.sg,b.O5,c.rH,k.B,C,v]}),s})();var I=l(9745),B=l(7319),P=l(405),q=l(3316);function N(s,o){if(1&s&&(e.TgZ(0,"h1",8)(1,"span",9),e._uU(2),e.qZA()()),2&s){const t=e.oxw();e.xp6(2),e.hij("Books by ",t.publisher.name,"")}}function J(s,o){if(1&s&&(e.TgZ(0,"h4",10),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.lnq(" ",t.publisher.name," has ",t.books.length," ",1===t.books.length?"book":"books"," ")}}function F(s,o){if(1&s&&(e.TgZ(0,"h4",10),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.publisher?null:t.publisher.name," has no books yet ")}}function S(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"button",11),e.NdJ("click",function(){const u=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.openUpdateDialog(u.bookId))}),e._uU(17,"Update"),e.qZA(),e.TgZ(18,"app-book-delete",12),e.NdJ("onDeleted",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.getBooksByPublisher(n.publisherId))}),e.qZA()()()}if(2&s){const t=o.$implicit,i=e.oxw();e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Oqu(i.isAuthorObject(t.author)?t.author.firstname+" "+t.author.lastname:t.author),e.xp6(2),e.Oqu(t.isbn),e.xp6(2),e.Oqu(i.isPublisherObject(t.publisher)?t.publisher.name:t.publisher),e.xp6(2),e.Oqu(t.pages),e.xp6(2),e.Oqu(t.publicationYear),e.xp6(2),e.Oqu(t.quantity),e.xp6(4),e.Q6J("bookId",t.bookId)}}let O=(()=>{class s{constructor(t,i,n,u){this.publisherService=t,this.bookService=i,this.dialog=n,this.route=u,this.books=[]}ngOnInit(){this.publisherId=+this.route.snapshot.params.publisherId,this.getBooksByPublisher(this.publisherId),this.publisherService.getPublisherById(this.publisherId).subscribe(t=>{console.log("Publisher Data:",t),this.publisher=t},t=>{console.error("Error fetching publisher data!",t)})}getBooksByPublisher(t){this.publisherService.findBooksByPublisherId(t).subscribe(i=>{this.books=i})}isPublisherObject(t){return t&&"object"==typeof t&&"name"in t}isAuthorObject(t){return t&&"object"==typeof t&&"firstname"in t&&"lastname"in t}openUpdateDialog(t){this.dialog.open(I.w,{minWidth:"50%",data:{bookId:t}}).afterClosed().subscribe(n=>{this.getBooksByPublisher(this.publisherId)})}openCreateDialog(){this.dialog.open(B.v,{minWidth:"50%",data:{bookId:null}}).afterClosed().subscribe(i=>{this.getBooksByPublisher(this.publisherId)})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.p),e.Y36(P.Z),e.Y36(p.uw),e.Y36(c.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-books-by-publisher"]],decls:29,vars:4,consts:[[1,"container"],["class","text-center display-5",4,"ngIf"],["class","text-center",4,"ngIf","ngIfElse"],["noBooks",""],[1,"btn","btn-success","mb-3",3,"click"],[1,"table","table-striped","table-hover"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"text-center","display-5"],[1,"badge","bg-dark"],[1,"text-center"],[1,"btn","btn-outline-warning","btn-sm","mx-2",3,"click"],[3,"bookId","onDeleted"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,N,3,1,"h1",1),e.YNc(2,J,2,3,"h4",2),e.YNc(3,F,2,1,"ng-template",null,3,e.W1O),e._UZ(5,"hr"),e.TgZ(6,"button",4),e.NdJ("click",function(){return i.openCreateDialog()}),e._uU(7,"Add new book"),e.qZA(),e.TgZ(8,"table",5)(9,"thead",6)(10,"tr")(11,"th"),e._uU(12,"Title"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Author"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"ISBN"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Publisher"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Pages"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Publication Year"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Quantity"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Actions"),e.qZA()()(),e.TgZ(27,"tbody"),e.YNc(28,S,19,8,"tr",7),e.qZA()()()),2&t){const n=e.MAs(4);e.xp6(1),e.Q6J("ngIf",i.publisher),e.xp6(1),e.Q6J("ngIf",i.publisher&&i.books.length>0)("ngIfElse",n),e.xp6(26),e.Q6J("ngForOf",i.books)}},dependencies:[b.sg,b.O5,q.G]}),s})();var D=l(5200),w=l(5605);const Y=[{path:"",redirectTo:"publishers-list",pathMatch:"full"},{path:"publishers-list",component:U},{path:"books-by-publisher/:publisherId",component:O},{path:"create-publisher",component:g},{path:"update-publisher/:publisherId",component:_}];let L=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[h.p,P.Z],imports:[b.ez,Z.JF,c.Bz.forChild(Y),r.UX,d.ZX,p.Is,D.BookModule,r.u5,w.p,c.Bz]}),s})()}}]);