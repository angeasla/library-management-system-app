"use strict";(self.webpackChunklibrary_management_system=self.webpackChunklibrary_management_system||[]).push([[200],{3316:(I,B,l)=>{l.d(B,{G:()=>v});var r=l(9468),e=l(405),o=l(7707);let v=(()=>{class m{constructor(p,Z){this.bookService=p,this.snackBar=Z,this.onDeleted=new r.vpe}deleteBook(){this.bookService.deleteBook(this.bookId).subscribe(()=>{console.log("Delete button clicked"),this.snackBar.open("Book deleted successfully!","",{duration:4e3}),this.onDeleted.emit()})}}return m.\u0275fac=function(p){return new(p||m)(r.Y36(e.Z),r.Y36(o.ux))},m.\u0275cmp=r.Xpm({type:m,selectors:[["app-book-delete"]],inputs:{bookId:"bookId"},outputs:{onDeleted:"onDeleted"},decls:2,vars:0,consts:[[1,"btn","btn-outline-danger","btn-sm","mx-1",3,"click"]],template:function(p,Z){1&p&&(r.TgZ(0,"button",0),r.NdJ("click",function(){return Z.deleteBook()}),r._uU(1,"Delete"),r.qZA())}}),m})()},7319:(I,B,l)=>{l.d(B,{v:()=>C});var r=l(6223),e=l(9468),o=l(405),v=l(7707),m=l(7700),f=l(3403),p=l(6814);function Z(u,_){if(1&u&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&u){const i=_.$implicit;e.Q6J("ngValue",i.authorId),e.xp6(1),e.AsE("",i.firstname," ",i.lastname,"")}}function T(u,_){if(1&u&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&u){const i=_.$implicit;e.Q6J("ngValue",i.publisherId),e.xp6(1),e.Oqu(i.name)}}let C=(()=>{class u{constructor(i,c,h,g){this.bookService=i,this.snackBar=c,this.dialogRef=h,this.router=g,this.books=[],this.authors=[],this.publishers=[],this.bookForm=new r.cw({title:new r.NI("",r.kI.required),author:new r.NI("",r.kI.required),isbn:new r.NI(""),publisher:new r.NI("",r.kI.required),pages:new r.NI(0),publicationYear:new r.NI(0),quantity:new r.NI(0)})}ngOnInit(){this.loadAuthors(),this.loadPublishers()}onSubmit(){if(console.log(FormData),this.bookForm.valid){const i=this.bookForm.value,c=i.author,h=i.publisher;if("number"!=typeof c)return void console.error("Invalid author ID");if("number"!=typeof h)return void console.error("Invalid publisher ID");this.bookService.createBook({title:i.title||"",author:{authorId:c},isbn:i.isbn||"",publisher:{publisherId:h},pages:i.pages||0,publicationYear:i.publicationYear||0,quantity:i.quantity||0}).subscribe(A=>{this.books.push(A),this.snackBar.open("Book created successfully!","",{duration:4e3}),this.dialogRef.close()})}}loadAuthors(){this.bookService.getAuthors().subscribe(i=>{this.authors=i})}loadPublishers(){this.bookService.getPublishers().subscribe(i=>{this.publishers=i})}onCancelClick(){this.dialogRef.close()}}return u.\u0275fac=function(i){return new(i||u)(e.Y36(o.Z),e.Y36(v.ux),e.Y36(m.so),e.Y36(f.F0))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-book-insert"]],decls:39,vars:3,consts:[[1,"container","p-4","mat-dialog-content"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","title",1,"form-label"],["id","title","type","text","formControlName","title",1,"form-control"],["for","author",1,"form-label"],["id","author","formControlName","author",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],["for","isbn",1,"form-label"],["id","isbn","type","text","formControlName","isbn",1,"form-control"],["for","publisher",1,"form-label"],["id","publisher","formControlName","publisher",1,"form-select"],["for","pages",1,"form-label"],["id","pages","type","number","formControlName","pages",1,"form-control"],["for","publicationYear",1,"form-label"],["id","publicationYear","type","number","formControlName","publicationYear",1,"form-control"],["for","quantity",1,"form-label"],["id","quantity","type","number","formControlName","quantity",1,"form-control"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-secondary","ms-3",3,"click"],[3,"ngValue"]],template:function(i,c){1&i&&(e.TgZ(0,"div",0)(1,"h3"),e._uU(2,"Create Book"),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return c.onSubmit()}),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Title:"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"div",2)(9,"label",5),e._uU(10,"Author:"),e.qZA(),e.TgZ(11,"select",6),e.YNc(12,Z,2,3,"option",7),e.qZA()(),e.TgZ(13,"div",2)(14,"label",8),e._uU(15,"ISBN:"),e.qZA(),e._UZ(16,"input",9),e.qZA(),e.TgZ(17,"div",2)(18,"label",10),e._uU(19,"Publisher:"),e.qZA(),e.TgZ(20,"select",11),e.YNc(21,T,2,2,"option",7),e.qZA()(),e.TgZ(22,"div",2)(23,"label",12),e._uU(24,"Pages:"),e.qZA(),e._UZ(25,"input",13),e.qZA(),e.TgZ(26,"div",2)(27,"label",14),e._uU(28,"Publication year:"),e.qZA(),e._UZ(29,"input",15),e.qZA(),e.TgZ(30,"div",2)(31,"label",16),e._uU(32,"Quantity:"),e.qZA(),e._UZ(33,"input",17),e.qZA(),e.TgZ(34,"div",2)(35,"button",18),e._uU(36,"Create Book"),e.qZA(),e.TgZ(37,"button",19),e.NdJ("click",function(){return c.onCancelClick()}),e._uU(38,"Cancel"),e.qZA()()()()),2&i&&(e.xp6(3),e.Q6J("formGroup",c.bookForm),e.xp6(9),e.Q6J("ngForOf",c.authors),e.xp6(9),e.Q6J("ngForOf",c.publishers))},dependencies:[p.sg,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.sg,r.u],styles:[".mat-dialog-content[_ngcontent-%COMP%]{max-height:95vh;overflow-y:auto}"]}),u})()},9745:(I,B,l)=>{l.d(B,{w:()=>C});var r=l(6223),e=l(7700),o=l(9468),v=l(405),m=l(3403),f=l(7707),p=l(6814);function Z(u,_){if(1&u&&(o.TgZ(0,"option",22),o._uU(1),o.qZA()),2&u){const i=_.$implicit;o.Q6J("value",i.authorId),o.xp6(1),o.AsE("",i.firstname," ",i.lastname,"")}}function T(u,_){if(1&u&&(o.TgZ(0,"option",22),o._uU(1),o.qZA()),2&u){const i=_.$implicit;o.Q6J("value",i.publisherId),o.xp6(1),o.Oqu(i.name)}}let C=(()=>{class u{constructor(i,c,h,g,A,y,U){this.bookService=i,this.route=c,this.router=h,this.fb=g,this.snackBar=A,this.dialogRef=y,this.data=U,this.bookId=null,this.publishers=[],this.authors=[],this.book=null,this.bookId=U.bookId,this.bookForm=this.fb.group({title:["",r.kI.required],author:["",r.kI.required],isbn:["",r.kI.required],publisher:["",r.kI.required],pages:["",r.kI.required],publicationYear:["",r.kI.required],quantity:["",r.kI.required]})}ngOnInit(){this.bookService.getPublishers().subscribe(i=>{this.publishers=i}),this.bookService.getAuthors().subscribe(i=>{this.authors=i}),this.bookId&&this.bookService.getBookById(this.bookId).subscribe(i=>{this.book=i}),this.bookId&&this.bookService.getBookById(this.bookId).subscribe(i=>{"object"==typeof i.publisher&&"object"==typeof i.author&&this.bookForm.patchValue({title:i.title,author:i.author.authorId,isbn:i.isbn,publisher:i.publisher.publisherId,pages:i.pages,publicationYear:i.publicationYear,quantity:i.quantity})})}updateBook(){if(this.bookForm.valid&&this.bookId){const i={...this.bookForm.value},c=this.publishers.find(g=>g.publisherId===+i.publisher);c&&(i.publisher=c);const h=this.authors.find(g=>g.authorId===+i.author);h&&(i.author=h),this.bookService.updateBook(this.bookId,i).subscribe(()=>{this.snackBar.open("Book updated successfully!","",{duration:2e3}),this.dialogRef.close()})}}onCancelClick(){this.dialogRef.close()}}return u.\u0275fac=function(i){return new(i||u)(o.Y36(v.Z),o.Y36(m.gz),o.Y36(m.F0),o.Y36(r.qu),o.Y36(f.ux),o.Y36(e.so),o.Y36(e.WI))},u.\u0275cmp=o.Xpm({type:u,selectors:[["app-book-update"]],decls:42,vars:4,consts:[[1,"container","p-4","mat-dialog-content"],[1,"nav","nav-underline"],[1,"nav-item"],[1,"nav-link","active"],[3,"formGroup","ngSubmit"],[1,"mb-3","form-group"],["for","title",1,"form-label","fw-bold"],["id","title","type","text","formControlName","title","name","title","required","",1,"form-control"],["for","author",1,"form-label","fw-bold"],["id","author","formControlName","author","required","",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","isbn",1,"form-label","fw-bold"],["id","isbn","type","text","formControlName","isbn","name","title","required","",1,"form-control"],["for","publisher",1,"form-label","fw-bold"],["id","publisher","formControlName","publisher","required","",1,"form-control"],["for","pages",1,"form-label","fw-bold"],["id","pages","type","number","formControlName","pages","name","title","required","",1,"form-control"],["for","status",1,"form-label","fw-bold"],["id","publicationYear","type","number","formControlName","publicationYear","name","title","required","",1,"form-control"],["id","quantity","type","number","formControlName","quantity","name","title","required","",1,"form-control"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-secondary","ms-3",3,"click"],[3,"value"]],template:function(i,c){1&i&&(o.TgZ(0,"div",0)(1,"ul",1)(2,"li",2)(3,"a",3),o._uU(4),o.qZA()()(),o._UZ(5,"hr"),o.TgZ(6,"form",4),o.NdJ("ngSubmit",function(){return c.updateBook()}),o.TgZ(7,"div",5)(8,"label",6),o._uU(9,"Title:"),o.qZA(),o._UZ(10,"input",7),o.qZA(),o.TgZ(11,"div",5)(12,"label",8),o._uU(13,"Author:"),o.qZA(),o.TgZ(14,"select",9),o.YNc(15,Z,2,3,"option",10),o.qZA()(),o.TgZ(16,"div",5)(17,"label",11),o._uU(18,"ISBN:"),o.qZA(),o._UZ(19,"input",12),o.qZA(),o.TgZ(20,"div",5)(21,"label",13),o._uU(22,"Publisher:"),o.qZA(),o.TgZ(23,"select",14),o.YNc(24,T,2,2,"option",10),o.qZA()(),o.TgZ(25,"div",5)(26,"label",15),o._uU(27,"Pages:"),o.qZA(),o._UZ(28,"input",16),o.qZA(),o.TgZ(29,"div",5)(30,"label",17),o._uU(31,"Publication year:"),o.qZA(),o._UZ(32,"input",18),o.qZA(),o.TgZ(33,"div",5)(34,"label",17),o._uU(35,"Quantity:"),o.qZA(),o._UZ(36,"input",19),o.qZA(),o.TgZ(37,"div",5)(38,"button",20),o._uU(39,"Update Book"),o.qZA(),o.TgZ(40,"button",21),o.NdJ("click",function(){return c.onCancelClick()}),o._uU(41,"Cancel"),o.qZA()()()()),2&i&&(o.xp6(4),o.hij("Update Book: ",c.bookForm.value.title,""),o.xp6(2),o.Q6J("formGroup",c.bookForm),o.xp6(9),o.Q6J("ngForOf",c.authors),o.xp6(9),o.Q6J("ngForOf",c.publishers))},dependencies:[p.sg,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.Q7,r.sg,r.u],styles:[".mat-dialog-content[_ngcontent-%COMP%]{max-height:95vh;overflow-y:auto}"]}),u})()},5200:(I,B,l)=>{l.r(B),l.d(B,{BookModule:()=>E});var r=l(3403),e=l(6814),o=l(9468),v=l(9372),m=l(405),f=l(7707),p=l(6223);function Z(s,d){if(1&s&&o._UZ(0,"option",13),2&s){const t=d.$implicit;o.Q6J("value",t.phone+" | "+t.firstname+" "+t.lastname)}}let T=(()=>{class s{constructor(t,n,a){this.userService=t,this.bookService=n,this.snackBar=a,this.users=[],this.selectedBookId=null,this.selectedUserId=null,this.selectedUserPhone=null,this.bookBorrowed=new o.vpe}ngOnInit(){}getAllUsers(){this.userService.getAllUsers().subscribe(t=>{this.users=t,console.log(this.users)})}openModal(t){this.selectedUserId=null,this.getAllUsers(),this.selectedBookId=t;const n=document.getElementById("borrowBookModal");n&&(this.modalInstance=new bootstrap.Modal(n),this.modalInstance.show())}borrowBook(){const t=this.users.find(n=>this.selectedUserPhone===n.phone+" | "+n.firstname+" "+n.lastname);this.selectedUserId=t?t.userId:null,null!==this.selectedBookId&&null!==this.selectedUserId?this.bookService.borrowBook(this.selectedUserId,this.selectedBookId).subscribe({next:n=>{console.log("Borrowed successfully:",n),this.modalInstance&&this.modalInstance.hide(),this.bookBorrowed.emit(),this.snackBar.open(" Book borrowed successfully!","",{duration:4e3})},error:n=>{console.error("Error borrowing book:",n),this.snackBar.open("Error in borrowing book","",{duration:4e3})}}):console.warn("User or Book ID not selected.")}updateSelectedUserId(){const t=this.users.find(n=>this.selectedUserPhone===n.phone+" | "+n.firstname+" "+n.lastname);this.selectedUserId=t?t.userId:null}}return s.\u0275fac=function(t){return new(t||s)(o.Y36(v.K),o.Y36(m.Z),o.Y36(f.ux))},s.\u0275cmp=o.Xpm({type:s,selectors:[["app-borrow-book"]],outputs:{bookBorrowed:"bookBorrowed"},decls:16,vars:3,consts:[["id","borrowBookModal","tabindex","-1","aria-labelledby","borrowBookModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","borrowBookModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["list","usersList","placeholder","Type to search user...",1,"form-control",3,"ngModel","ngModelChange"],["id","usersList"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"value"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),o._uU(5,"Borrow book to user"),o.qZA(),o._UZ(6,"button",5),o.qZA(),o.TgZ(7,"div",6)(8,"input",7),o.NdJ("ngModelChange",function(b){return n.selectedUserPhone=b})("ngModelChange",function(){return n.updateSelectedUserId()}),o.qZA(),o.TgZ(9,"datalist",8),o.YNc(10,Z,1,1,"option",9),o.qZA()(),o.TgZ(11,"div",10)(12,"button",11),o._uU(13,"Cancel"),o.qZA(),o.TgZ(14,"button",12),o.NdJ("click",function(){return n.borrowBook()}),o._uU(15,"Borrow"),o.qZA()()()()()),2&t&&(o.xp6(8),o.Q6J("ngModel",n.selectedUserPhone),o.xp6(2),o.Q6J("ngForOf",n.users),o.xp6(4),o.Q6J("disabled",!n.selectedUserId))},dependencies:[e.sg,p.YN,p.Kr,p.Fj,p.JJ,p.On]}),s})();var C=l(9745),u=l(7319),_=l(7700),i=l(68),c=l(3316);let h=(()=>{class s{constructor(t){this.bookService=t,this.bookFound=new o.vpe,this.title="",this.book=null}ngOnInit(){}search(){this.bookService.getBookByTitle(this.title).subscribe(t=>this.bookFound.emit(t),t=>console.error("Error fetching book by title",t))}}return s.\u0275fac=function(t){return new(t||s)(o.Y36(m.Z))},s.\u0275cmp=o.Xpm({type:s,selectors:[["app-book-search-by-title"]],outputs:{bookFound:"bookFound"},decls:4,vars:1,consts:[[1,"input-group"],["type","text","placeholder","Search by title","aria-label","Example text with button addon","aria-describedby","button-addon1",3,"ngModel","ngModelChange","keyup.enter"],["type","button","id","button-addon1",1,"btn","btn-outline-primary",3,"click"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0)(1,"input",1),o.NdJ("ngModelChange",function(b){return n.title=b})("keyup.enter",function(){return n.search()}),o.qZA(),o.TgZ(2,"button",2),o.NdJ("click",function(){return n.search()}),o._uU(3,"Search"),o.qZA()()),2&t&&(o.xp6(1),o.Q6J("ngModel",n.title))},dependencies:[p.Fj,p.JJ,p.On]}),s})();function g(s,d){if(1&s){const t=o.EpF();o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.TgZ(11,"td"),o._uU(12),o.qZA(),o.TgZ(13,"td"),o._uU(14),o.qZA(),o.TgZ(15,"td")(16,"button",17),o.NdJ("click",function(){const b=o.CHM(t).$implicit,k=o.oxw(2);return o.KtG(null==k.borrowBookComponent?null:k.borrowBookComponent.openModal(b.bookId))}),o._uU(17,"Borrow"),o.qZA(),o.TgZ(18,"button",18),o.NdJ("click",function(){const b=o.CHM(t).$implicit,k=o.oxw(2);return o.KtG(k.openUpdateDialog(b.bookId))}),o._uU(19,"Update"),o.qZA(),o.TgZ(20,"app-book-delete",19),o.NdJ("onDeleted",function(){o.CHM(t);const a=o.oxw(2);return o.KtG(a.getAllBooksWithPagination(0))}),o.qZA()()()}if(2&s){const t=d.$implicit,n=o.oxw(2);o.xp6(2),o.Oqu(t.title),o.xp6(2),o.Oqu(n.isAuthorObject(t.author)?t.author.firstname+" "+t.author.lastname:t.author),o.xp6(2),o.Oqu(t.isbn),o.xp6(2),o.Oqu(n.isPublisherObject(t.publisher)?t.publisher.name:t.publisher),o.xp6(2),o.Oqu(t.pages),o.xp6(2),o.Oqu(t.publicationYear),o.xp6(2),o.Oqu(t.quantity),o.xp6(2),o.Q6J("disabled",0===t.quantity),o.xp6(4),o.Q6J("bookId",t.bookId)}}function A(s,d){if(1&s){const t=o.EpF();o.TgZ(0,"div")(1,"table",11)(2,"thead",12)(3,"tr")(4,"th"),o._uU(5,"Title"),o.qZA(),o.TgZ(6,"th"),o._uU(7,"Author"),o.qZA(),o.TgZ(8,"th"),o._uU(9,"ISBN"),o.qZA(),o.TgZ(10,"th"),o._uU(11,"Publisher"),o.qZA(),o.TgZ(12,"th"),o._uU(13,"Pages"),o.qZA(),o.TgZ(14,"th"),o._uU(15,"Publication Year"),o.qZA(),o.TgZ(16,"th"),o._uU(17,"Quantity"),o.qZA(),o.TgZ(18,"th"),o._uU(19,"Actions"),o.qZA()()(),o.TgZ(20,"tbody"),o.YNc(21,g,21,9,"tr",13),o.qZA()(),o.TgZ(22,"button",14),o.NdJ("click",function(){o.CHM(t);const a=o.oxw();return o.KtG(a.backToBooksList())}),o.O4$(),o.TgZ(23,"svg",15),o._UZ(24,"path",16),o.qZA(),o._uU(25," Back to Books List"),o.qZA()()}if(2&s){const t=o.oxw();o.xp6(21),o.Q6J("ngForOf",t.searchedBook)}}function y(s,d){if(1&s){const t=o.EpF();o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.TgZ(11,"td"),o._uU(12),o.qZA(),o.TgZ(13,"td"),o._uU(14),o.qZA(),o.TgZ(15,"td")(16,"button",17),o.NdJ("click",function(){const b=o.CHM(t).$implicit,k=o.oxw(2);return o.KtG(null==k.borrowBookComponent?null:k.borrowBookComponent.openModal(b.bookId))}),o._uU(17,"Borrow"),o.qZA(),o.TgZ(18,"button",18),o.NdJ("click",function(){const b=o.CHM(t).$implicit,k=o.oxw(2);return o.KtG(k.openUpdateDialog(b.bookId))}),o._uU(19,"Update"),o.qZA(),o.TgZ(20,"app-book-delete",19),o.NdJ("onDeleted",function(){o.CHM(t);const a=o.oxw(2);return o.KtG(a.getAllBooksWithPagination(0))}),o.qZA()()()}if(2&s){const t=d.$implicit,n=o.oxw(2);o.xp6(2),o.Oqu(t.title),o.xp6(2),o.Oqu(n.isAuthorObject(t.author)?t.author.firstname+" "+t.author.lastname:t.author),o.xp6(2),o.Oqu(t.isbn),o.xp6(2),o.Oqu(n.isPublisherObject(t.publisher)?t.publisher.name:t.publisher),o.xp6(2),o.Oqu(t.pages),o.xp6(2),o.Oqu(t.publicationYear),o.xp6(2),o.Oqu(t.quantity),o.xp6(2),o.Q6J("disabled",0===t.quantity),o.xp6(4),o.Q6J("bookId",t.bookId)}}function U(s,d){if(1&s){const t=o.EpF();o.TgZ(0,"li",22)(1,"a",23),o.NdJ("click",function(){const b=o.CHM(t).$implicit,k=o.oxw(2);return o.KtG(k.onPageChange(b))}),o._uU(2),o.qZA()()}if(2&s){const t=d.$implicit,n=o.oxw(2);o.ekj("active",t===n.currentPage),o.xp6(2),o.Oqu(t+1)}}function q(s,d){if(1&s){const t=o.EpF();o.TgZ(0,"div")(1,"table",11)(2,"thead",12)(3,"tr")(4,"th"),o._uU(5,"Title"),o.qZA(),o.TgZ(6,"th"),o._uU(7,"Author"),o.qZA(),o.TgZ(8,"th"),o._uU(9,"ISBN"),o.qZA(),o.TgZ(10,"th"),o._uU(11,"Publisher"),o.qZA(),o.TgZ(12,"th"),o._uU(13,"Pages"),o.qZA(),o.TgZ(14,"th"),o._uU(15,"Publication Year"),o.qZA(),o.TgZ(16,"th"),o._uU(17,"Quantity"),o.qZA(),o.TgZ(18,"th"),o._uU(19,"Actions"),o.qZA()()(),o.TgZ(20,"tbody"),o.YNc(21,y,21,9,"tr",13),o.qZA()(),o.TgZ(22,"nav",20)(23,"ul",21)(24,"li",22)(25,"a",23),o.NdJ("click",function(){o.CHM(t);const a=o.oxw();return o.KtG(a.onPageChange(a.currentPage-1))}),o._uU(26,"Previous"),o.qZA()(),o.YNc(27,U,3,3,"li",24),o.TgZ(28,"li",22)(29,"a",23),o.NdJ("click",function(){o.CHM(t);const a=o.oxw();return o.KtG(a.onPageChange(a.currentPage+1))}),o._uU(30,"Next"),o.qZA()()()()()}if(2&s){const t=o.oxw();o.xp6(21),o.Q6J("ngForOf",t.books),o.xp6(3),o.ekj("disabled",0===t.currentPage),o.xp6(3),o.Q6J("ngForOf",t.pageNumbers),o.xp6(1),o.ekj("disabled",t.currentPage===t.totalBooks/t.pageSize-1)}}let x=(()=>{class s{constructor(t,n,a){this.bookService=t,this.userService=n,this.dialog=a,this.books=[],this.totalBooks=0,this.pageSize=10,this.currentPage=0,this.pageNumbers=[],this.searchedBook=null}ngOnInit(){this.getAllBooksWithPagination(this.currentPage)}getAllBooks(){this.bookService.getAllBooks().subscribe(t=>{this.books=t})}getAllBooksWithPagination(t){this.bookService.getAllBooksWithPagination(t,10).subscribe({next:n=>{this.books=n.content,this.totalBooks=n.totalElements,this.pageNumbers=Array.from({length:n.totalPages},(a,b)=>b)},error:n=>{console.error("Error fetching books:",n)}})}isPublisherObject(t){return t&&"object"==typeof t&&"name"in t}isAuthorObject(t){return t&&"object"==typeof t&&"firstname"in t&&"lastname"in t}openUpdateDialog(t){this.dialog.open(C.w,{minWidth:"50%",autoFocus:!1,data:{bookId:t}}).afterClosed().subscribe(a=>{this.getAllBooksWithPagination(0)})}openCreateDialog(){this.dialog.open(u.v,{minWidth:"50%",autoFocus:!1,data:{bookId:null}}).afterClosed().subscribe(n=>{this.getAllBooksWithPagination(0)})}onPageChange(t){t>=0&&t<this.pageNumbers.length&&(this.currentPage=t,this.getAllBooksWithPagination(t))}displaySearchedBook(t){this.searchedBook=t}backToBooksList(){this.searchedBook=null}}return s.\u0275fac=function(t){return new(t||s)(o.Y36(m.Z),o.Y36(v.K),o.Y36(_.uw))},s.\u0275cmp=o.Xpm({type:s,selectors:[["app-books-list"]],viewQuery:function(t,n){if(1&t&&o.Gf(T,5),2&t){let a;o.iGM(a=o.CRH())&&(n.borrowBookComponent=a.first)}},decls:17,vars:2,consts:[[1,"container"],[1,"nav","nav-tabs"],[1,"nav-item","display-6"],[1,"nav-link","active"],[1,"fa-solid","fa-book"],[1,"d-flex","mb-3"],[1,"btn","btn-success",3,"click"],[1,"ms-auto"],[3,"bookFound"],[4,"ngIf"],[3,"bookBorrowed"],[1,"table","table-striped","table-hover"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"btn","btn-secondary","mb-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-left"],["fill-rule","evenodd","d","M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"],[1,"btn","btn-outline-primary","btn-sm","mx-1",3,"disabled","click"],[1,"btn","btn-outline-warning","btn-sm","mx-1",3,"click"],[3,"bookId","onDeleted"],["aria-label","Books pagination",1,"mt-3"],[1,"pagination","justify-content-center"],[1,"page-item"],["href","javascript:void(0)",1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0)(1,"ul",1)(2,"li",2)(3,"a",3),o._uU(4,"Books"),o.qZA()()(),o._UZ(5,"br")(6,"app-statistics")(7,"hr")(8,"i",4),o.TgZ(9,"div",5)(10,"button",6),o.NdJ("click",function(){return n.openCreateDialog()}),o._uU(11,"Add New Book"),o.qZA(),o.TgZ(12,"div",7)(13,"app-book-search-by-title",8),o.NdJ("bookFound",function(b){return n.displaySearchedBook(b)}),o.qZA()()(),o.YNc(14,A,26,1,"div",9),o.YNc(15,q,31,6,"div",9),o.TgZ(16,"app-borrow-book",10),o.NdJ("bookBorrowed",function(){return n.getAllBooksWithPagination(0)}),o.qZA()()),2&t&&(o.xp6(14),o.Q6J("ngIf",n.searchedBook),o.xp6(1),o.Q6J("ngIf",!n.searchedBook))},dependencies:[e.sg,e.O5,i.B,c.G,T,h]}),s})();var P=l(9862),O=l(1396),M=l(5605);const w=[{path:"",redirectTo:"books-list",pathMatch:"full"},{path:"books-list",component:x},{path:"create-book",component:u.v},{path:"update-book/:bookId",component:C.w}];let E=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=o.oAB({type:s}),s.\u0275inj=o.cJS({providers:[m.Z],imports:[e.ez,P.JF,r.Bz.forChild(w),p.UX,f.ZX,O.BorrowModule,p.u5,_.Is,M.p,r.Bz]}),s})()}}]);